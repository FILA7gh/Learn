
Агрегация в контексте баз данных — это процесс вычисления сводных данных из набора строк.
Обычно это делается с помощью агрегатных функций, которые объединяют несколько значений в одно значение.
Агрегация используется для получения статистических данных, таких как сумма, среднее значение,
количество, минимум, максимум и так далее.

Основные агрегатные функции

    COUNT: Возвращает количество строк в группе.

    SELECT COUNT(*) FROM employees;


    SUM: Возвращает сумму значений указанного столбца.

    SELECT SUM(salary) FROM employees;


    AVG: Возвращает среднее значение указанного столбца.

    SELECT AVG(salary) FROM employees;


    MIN: Возвращает минимальное значение указанного столбца.

        SELECT MIN(salary) FROM employees;


    MAX: Возвращает максимальное значение указанного столбца.

        SELECT MAX(salary) FROM employees;


Группировка и агрегатные функции

    Для выполнения агрегации по группам данных используется ключевое слово GROUP BY.
    Оно позволяет разбить данные на группы и выполнить агрегатные функции для каждой группы отдельно.

    Пример использования

    Предположим, у нас есть таблица employees со следующими данными:

        id	department	salary
        1	IT	        6000
        2	HR	        4000
        3	IT	        7000
        4	HR	        4500
        5	Sales	    5000


Пример запроса с группировкой и агрегацией

    SELECT department, SUM(salary) as total_salary
    FROM employees
    GROUP BY department;

    Этот запрос вернет общую сумму зарплат по каждому департаменту:

    department	total_salary
    IT	        13000
    HR	        8500
    Sales	    5000


Агрегация с условиями

    Для выполнения агрегации с условиями можно использовать ключевое слово HAVING,
    которое применяется к результатам GROUP BY.


Пример использования HAVING

    SELECT department, AVG(salary) as avg_salary
    FROM employees
    GROUP BY department
    HAVING AVG(salary) > 5000;


    Этот запрос вернет только те департаменты, в которых средняя зарплата превышает 5000:

        department	avg_salary
        IT	        6500



Заключение

    Агрегация — это мощный инструмент для анализа данных в базах данных. Она позволяет получать сводные данные
    и выполнять статистические вычисления, что особенно полезно для отчетности и аналитики.
    Основные агрегатные функции (COUNT, SUM, AVG, MIN, MAX) и ключевые слова GROUP BY и HAVING
    помогают эффективно группировать и агрегировать данные, извлекая важную информацию из больших наборов данных.
