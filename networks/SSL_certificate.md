
SSL сертификат — это цифровой сертификат, который используется для установления защищенного (зашифрованного)
соединения между веб-сервером и браузером. SSL сертификаты подтверждают подлинность веб-сайта
и обеспечивают конфиденциальность данных, передаваемых между сервером и клиентом.


Основные элементы SSL сертификата

    Доменное имя:
        Сертификат выдается для конкретного доменного имени (например, example.com).


    Данные организации:
        Информация о владельце сертификата (имя организации, страна, город и т.д.).


    Центр сертификации (CA):
        Организация, которая выдает сертификат и подтверждает его подлинность (например, Let's Encrypt, Comodo, DigiCert и т.д.).


    Срок действия:
        Период, в течение которого сертификат считается действительным (обычно от 1 до 2 лет).


    Публичный ключ:
        Открытый ключ, используемый для шифрования данных, отправляемых на сервер.


    Подпись CA:
        Цифровая подпись, подтверждающая подлинность сертификата.



Виды SSL сертификатов

    Сертификаты с проверкой домена (Domain Validated, DV):
        Самый простой тип сертификата. Центр сертификации проверяет только владение доменом.


    Сертификаты с проверкой организации (Organization Validated, OV):
        Дополнительная проверка включает проверку данных организации. Более высокий уровень доверия по сравнению с DV.


    Сертификаты с расширенной проверкой (Extended Validation, EV):
        Самый высокий уровень проверки, включает тщательную проверку компании.
        В браузере показывается зеленая адресная строка с названием организации.


    Wildcard сертификаты:
        Позволяют защитить основной домен и все его поддомены (например, *.example.com).


    Мульти-доменные сертификаты (Multi-Domain SSL, SAN):
        Позволяют защитить несколько доменов с одним сертификатом.



Получение и установка SSL сертификата

    Получение бесплатного SSL сертификата с Let's Encrypt

    Let's Encrypt — это бесплатный центр сертификации, который предоставляет SSL сертификаты.
    Для автоматизации процесса получения и установки сертификатов можно использовать утилиту Certbot.

    Установка Certbot:

        sudo apt update
        sudo apt install certbot python3-certbot-nginx


    Получение сертификата:

        Используйте Certbot для автоматической настройки Nginx и получения сертификата:

            sudo certbot --nginx -d example.com -d www.example.com


    Проверка и настройка автоматического обновления сертификатов:

        Certbot автоматически настроит cron-задание для обновления сертификатов. Можно проверить это задание:

            sudo systemctl status certbot.timer



Ручная установка SSL сертификата

    Если вы приобрели сертификат у другого центра сертификации, вам необходимо установить его вручную.

    Получите сертификат и ключ:

        Обычно вы получите три файла: приватный ключ (private.key), сертификат (certificate.crt)
                                      и промежуточный сертификат (intermediate.crt).


    Скопируйте файлы на сервер:

        Поместите файлы в безопасное место на сервере, например, в /etc/nginx/ssl/.


    Настройте Nginx для использования сертификата:

        Откройте файл конфигурации вашего сайта (например, /etc/nginx/sites-available/example.com)
        и добавьте или измените настройки SSL:

            server {
                listen 443 ssl;
                server_name example.com www.example.com;

                ssl_certificate /etc/nginx/ssl/certificate.crt;
                ssl_certificate_key /etc/nginx/ssl/private.key;
                ssl_trusted_certificate /etc/nginx/ssl/intermediate.crt;

                ssl_protocols TLSv1.2 TLSv1.3;
                ssl_ciphers 'ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256';
                ssl_prefer_server_ciphers on;

                location / {
                    proxy_pass http://127.0.0.1:8080;
                    proxy_set_header Host $host;
                    proxy_set_header X-Real-IP $remote_addr;
                    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                    proxy_set_header X-Forwarded-Proto $scheme;
                }
            }

            server {
                listen 80;
                server_name example.com www.example.com;
                return 301 https://$host$request_uri;  # Перенаправление HTTP на HTTPS
            }


    Перезапуск Nginx:
    
        Проверьте конфигурацию и перезапустите Nginx для применения изменений:
    
            sudo nginx -t
            sudo systemctl restart nginx



Заключение

    SSL сертификат — это важный элемент обеспечения безопасности веб-сайта. 
    Он защищает данные пользователей и подтверждает подлинность сайта. 
    Настройка и установка SSL сертификата с использованием Nginx относительно проста, 
    особенно с помощью инструментов автоматизации, таких как Certbot от Let's Encrypt. 
    Использование SSL/TLS рекомендуется для всех сайтов, особенно тех, которые обрабатывают чувствительные данные, 
    такие как пароли или платежная информация.

