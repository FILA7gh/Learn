

Сигналы в Django — это механизм, позволяющий отправлять уведомления, когда происходят определенные события в вашем приложении.
Сигналы помогают реализовать слабо связанные компоненты, которые могут реагировать на различные действия без необходимости
модифицировать основной код этих действий. Это особенно полезно для выполнения дополнительных операций или изменений
в ответ на события, такие как создание или обновление объекта.


Django предоставляет несколько встроенных сигналов, таких как:

    django.db.models.signals.pre_save: отправляется перед сохранением экземпляра модели.

    django.db.models.signals.post_save: отправляется после сохранения экземпляра модели.

    django.db.models.signals.pre_delete: отправляется перед удалением экземпляра модели.

    django.db.models.signals.post_delete: отправляется после удаления экземпляра модели.


Пример использования сигналов

    Рассмотрим пример использования сигналов для отправки уведомления по электронной почте после создания нового пользователя.

        Создание файла для сигналов:

            В вашем приложении создайте файл signals.py, если его еще нет.

            # signals.py
            from django.db.models.signals import post_save
            from django.contrib.auth.models import User
            from django.dispatch import receiver
            from django.core.mail import send_mail

            @receiver(post_save, sender=User)
            def send_welcome_email(sender, instance, created, **kwargs):
                if created:
                    send_mail(
                        'Welcome!',
                        'Thank you for signing up for our service.',
                        'from@example.com',
                        [instance.email],
                        fail_silently=False,
                    )


        Регистрация сигналов:

            В вашем приложении зарегистрируйте сигналы, добавив следующий код в файл apps.py вашего приложения.

            # apps.py
            from django.apps import AppConfig

            class MyAppConfig(AppConfig):
                name = 'myapp'

                def ready(self):
                    import myapp.signals

        
        Убедитесь, что ваш __init__.py файл в приложении загружает конфигурацию приложения:

            # __init__.py
            default_app_config = 'myapp.apps.MyAppConfig'



Как работают сигналы

    Создание сигналов: 
    
        Сигналы создаются с помощью функций или методов, которые декорируются декоратором @receiver из модуля django.dispatch.


    Регистрация сигналов: 
    
        Сигналы должны быть зарегистрированы, чтобы Django знал о них. Это обычно делается в методе ready 
        класса конфигурации приложения (наследник AppConfig).


    Отправка сигналов:
        
        Когда происходит событие, связанное с сигналом (например, сохранение объекта модели), 
        соответствующий сигнал автоматически отправляется, и все подключенные к нему функции-обработчики выполняются.



Полезные встроенные сигналы в Django

    pre_save и post_save: Используются для выполнения действий до или после сохранения экземпляра модели.
   
    pre_delete и post_delete: Используются для выполнения действий до или после удаления экземпляра модели.
   
    m2m_changed: Отправляется при изменении отношений "многие ко многим" (ManyToManyField).



Сигналы в Django позволяют вам расширять функциональность вашего приложения, реагируя на определенные события, 
такие как создание или обновление объектов, и выполнять дополнительные операции, такие как отправка уведомлений, 
обновление связанных данных или ведение журналов изменений.
